"use strict";(self.webpackChunk_adobe_uix_docs=self.webpackChunk_adobe_uix_docs||[]).push([[9204],{4223:function(e,t,n){n.r(t),n.d(t,{_frontmatter:function(){return r},default:function(){return s}});var a=n(87462),d=n(45987),l=(n(15007),n(64983)),i=n(91515);const m=["components"],r={},o={_frontmatter:r},p=i.Z;function s(e){let{components:t}=e,n=(0,d.Z)(e,m);return(0,l.mdx)(p,(0,a.Z)({},o,n,{components:t,mdxType:"MDXLayout"}),(0,l.mdx)("h1",{id:"canvas-data-api"},"Canvas Data API"),(0,l.mdx)("p",null,"Canvas Data API provides a possibility to programmatically read and change field values from extensions. This API works with data from UI only and doesn't directly interact with AEM instance. However, the data manipulations done using this API may be auto-saved by UI itself."),(0,l.mdx)("h2",{id:"getting-values-from-canvas"},"Getting values from canvas"),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-js"},'const api = await guestConnection.host.dataApi.get();\nconst fields = await api.getFields();\nconsole.log(fields);\n/**\n * [\n *   {\n *       "name": "test-textarea",\n *       "value": {\n *           "contentType": "text/html",\n *           "value": "<p>Text area content</p>"\n *       },\n *       "type": "text-multi",\n *       "isMultiField": false\n *   },\n *   {\n *       "name": "onelinetext",\n *       "value": "Test one line content",\n *       "type": "text-single",\n *       "isMultiField": false\n *   }\n * ]\n */\n')),(0,l.mdx)("h2",{id:"setting-new-values"},"Setting new values"),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-js"},'const api = await guestConnection.host.dataApi.get();\nconst fieldName = "test-field";\nawait api.setValue(fieldName, "New value");\n//await api.setValue(fieldName, "New value", 0); - A last parameter specifies an index in multi-field values\n')),(0,l.mdx)("h2",{id:"setting-styles-to-the-field"},"Setting styles to the field"),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-js"},'const api = await guestConnection.host.dataApi.get();\nconst fieldName = "test-field";\nawait api.setStyle(fieldName, {"display": "none"});\n// Second parameter is the object that is used to pass the styles that will be applied on field\n')),(0,l.mdx)("h2",{id:"consistency"},"Consistency"),(0,l.mdx)("p",null,(0,l.mdx)("inlineCode",{parentName:"p"},"guestConnection.host.dataApi.get()")," makes a snapshot of canvas data at the moment of invocation. Changes made by other extensions or direct users will not be automatically propagated to existing API instances.\nConsider calling this method multiple times during long-running processes to get fresh data."),(0,l.mdx)("h3",{id:"api-reference"},"API Reference"),(0,l.mdx)("h4",{id:"field-format"},"Field format"),(0,l.mdx)("table",null,(0,l.mdx)("thead",{parentName:"table"},(0,l.mdx)("tr",{parentName:"thead"},(0,l.mdx)("th",{parentName:"tr",align:null},"Field"),(0,l.mdx)("th",{parentName:"tr",align:null},"Type"),(0,l.mdx)("th",{parentName:"tr",align:null},"Required"),(0,l.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,l.mdx)("tbody",{parentName:"table"},(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"name"),(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},"string")),(0,l.mdx)("td",{parentName:"tr",align:null},"✔️"),(0,l.mdx)("td",{parentName:"tr",align:null},"A unique field name that could be used as id")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"value"),(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},"string")," ","|"," ",(0,l.mdx)("inlineCode",{parentName:"td"},"Object")," ","|"," ",(0,l.mdx)("inlineCode",{parentName:"td"},"number")," ","|"," ",(0,l.mdx)("inlineCode",{parentName:"td"},"boolean")),(0,l.mdx)("td",{parentName:"tr",align:null},"✔️"),(0,l.mdx)("td",{parentName:"tr",align:null},"A field value. The type is dependent on field type")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"type"),(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},"string")),(0,l.mdx)("td",{parentName:"tr",align:null},"✔️"),(0,l.mdx)("td",{parentName:"tr",align:null},"A field type")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"isMultiField"),(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},"boolean")),(0,l.mdx)("td",{parentName:"tr",align:null}),(0,l.mdx)("td",{parentName:"tr",align:null},"A flag representing wether field contains multiple values or not")))),(0,l.mdx)("h4",{id:"field-types"},"Field types"),(0,l.mdx)("table",null,(0,l.mdx)("thead",{parentName:"table"},(0,l.mdx)("tr",{parentName:"thead"},(0,l.mdx)("th",{parentName:"tr",align:null},"Type"),(0,l.mdx)("th",{parentName:"tr",align:null},"Value format"),(0,l.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,l.mdx)("tbody",{parentName:"table"},(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},"text-signle")),(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},"string")),(0,l.mdx)("td",{parentName:"tr",align:null},"A single line text field")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},"text-multi")),(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},"object")),(0,l.mdx)("td",{parentName:"tr",align:null},'A multi line text field. Object structure: { "contentType": ',(0,l.mdx)("inlineCode",{parentName:"td"},"string"),', "value": ',(0,l.mdx)("inlineCode",{parentName:"td"},"string"),"}. Allowed types are ",(0,l.mdx)("inlineCode",{parentName:"td"},"text/x-markdown"),", ",(0,l.mdx)("inlineCode",{parentName:"td"},"text/plain"),", ",(0,l.mdx)("inlineCode",{parentName:"td"},"text/html"))),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},"boolean")),(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},"boolean")),(0,l.mdx)("td",{parentName:"tr",align:null},"A boolean field")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},"date")),(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},"string")),(0,l.mdx)("td",{parentName:"tr",align:null},"A date or time field in ISO 8601 format")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},"number")),(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},"number")),(0,l.mdx)("td",{parentName:"tr",align:null},"A number field")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},"enumeration")),(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},"string")),(0,l.mdx)("td",{parentName:"tr",align:null},"A selected option from the list of allowed values")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},"json")),(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},"string")),(0,l.mdx)("td",{parentName:"tr",align:null},"A code block field with JSON code")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},"tags")),(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},"string[]")),(0,l.mdx)("td",{parentName:"tr",align:null},"A tags field")))))}s.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-services-aem-cf-editor-api-data-index-md-d2344de843bc029c5e4f.js.map