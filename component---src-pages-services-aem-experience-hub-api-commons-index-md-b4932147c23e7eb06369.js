"use strict";(self.webpackChunk_adobe_uix_docs=self.webpackChunk_adobe_uix_docs||[]).push([[7448],{4165:function(e,n,t){t.r(n),t.d(n,{_frontmatter:function(){return d},default:function(){return p}});var o=t(87462),i=t(45987),a=(t(15007),t(64983)),s=t(91515);const r=["components"],d={},m={_frontmatter:d},c=s.Z;function p(e){let{components:n}=e,t=(0,i.Z)(e,r);return(0,a.mdx)(c,(0,o.Z)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,a.mdx)("h1",{id:"common-concepts-in-creating-extensions"},"Common Concepts in Creating Extensions"),(0,a.mdx)("p",null,"Understand the fundamentals required to develop an extension for AEM Experience Hub."),(0,a.mdx)("h2",{id:"extension-point"},"Extension Point"),(0,a.mdx)("p",null,"Experience Hub has an ",(0,a.mdx)("inlineCode",{parentName:"p"},"aem/launchpad/1")," ",(0,a.mdx)("a",{parentName:"p",href:"https://developer.adobe.com/app-builder/docs/guides/extensions/"},"extension point")," that allows you to extend its functionality.\nTo declare it to be used by your extension, you need to add the following configuration to your ",(0,a.mdx)("inlineCode",{parentName:"p"},"app.config.yaml")," at the\nroot of your extension:"),(0,a.mdx)("pre",null,(0,a.mdx)("code",{parentName:"pre",className:"language-yaml"},"extensions:\n  aem/launchpad/1:\n    $include: src/aem/launchpad/1/ext.config.yaml\n")),(0,a.mdx)("p",null,"Here is an example of ",(0,a.mdx)("inlineCode",{parentName:"p"},"ext.config.yaml")," file:"),(0,a.mdx)("pre",null,(0,a.mdx)("code",{parentName:"pre",className:"language-yaml"},"operations:\n  view:\n    - type: web\n      impl: index.html\nactions: actions\nweb: web-src\n")),(0,a.mdx)("h2",{id:"extension-registration"},"Extension Registration"),(0,a.mdx)("p",null,"Interaction between UI Extension and Experience Hub starts with the initialization process that includes extension's\ncapabilities registration so Experience Hub knows when to invoke the extension. Registration is done by ",(0,a.mdx)("inlineCode",{parentName:"p"},"register"),"\nmethod provided by ",(0,a.mdx)("inlineCode",{parentName:"p"},"@adobe/uix-guest")," library. This asynchronous method takes single object that describes extension\nand returns object representing connection to the Experience Hub."),(0,a.mdx)("p",null,"Method ",(0,a.mdx)("inlineCode",{parentName:"p"},"register")," should be invoked after extension initialization page is loaded."),(0,a.mdx)("p",null,"Extension registration data must include:"),(0,a.mdx)("ul",null,(0,a.mdx)("li",{parentName:"ul"},(0,a.mdx)("inlineCode",{parentName:"li"},"id")," - string with random extension identifier. This identifier useful for debugging of interaction between Experience\nHub and extension and needed if extension provides custom UI."),(0,a.mdx)("li",{parentName:"ul"},(0,a.mdx)("inlineCode",{parentName:"li"},"methods")," - objects with extension code exposed to the Experience Hub. All methods are grouped into\nnamespaces that represents extension points provided by the Experience Hub.\nCurrently, the following ",(0,a.mdx)("strong",{parentName:"li"},"namespace")," is available:",(0,a.mdx)("ul",{parentName:"li"},(0,a.mdx)("li",{parentName:"ul"},(0,a.mdx)("strong",{parentName:"li"},"dashboard"),", that allows to add custom widgets and customize the dashboard layout")))),(0,a.mdx)("pre",null,(0,a.mdx)("code",{parentName:"pre",className:"language-jsx"},"import { Text } from \"@adobe/react-spectrum\";\nimport { register } from \"@adobe/uix-guest\";\nimport metadata from '../../../../app-metadata.json';\nimport { extensionId } from \"./Constants\";\n\nfunction ExtensionRegistration() {\n  const init = async () => {\n    const guestConnection = await register({\n      id: extensionId,\n      metadata,\n      methods: {\n        dashboard: {\n          getWidget() {\n            return {\n                id: extensionId,\n                title: 'demo-extension-project',\n                description: 'This is demo-extension-project',\n                url: '/index.html#/demo-extension-project',\n                widgetSize: {\n                  defaultWidth: 6,\n                  defaultHeight: 6\n                },\n                hideWidgetHeader: false\n              };\n          },\n        },\n      },\n    });\n  };\n  init().catch(console.error);\n\n  return <Text>IFrame for integration with Host (AEM)...</Text>\n}\n\nexport default ExtensionRegistration;\n")),(0,a.mdx)("h2",{id:"building-extension-ui"},"Building Extension UI"),(0,a.mdx)("p",null,"In cases where a UI Extension manages data or sends data to a remote service, the register method is the only one expected to be called. If the UI Extension includes its own interface and it needs data from Experience Hub or needs to trigger any logic, it should establish a connection using the ",(0,a.mdx)("inlineCode",{parentName:"p"},"attach")," method."),(0,a.mdx)("pre",null,(0,a.mdx)("code",{parentName:"pre",className:"language-jsx"},'import React, { useEffect, useState } from \'react\';\nimport { attach } from "@adobe/uix-guest";\nimport { TextField, Button } from \'@adobe/react-spectrum\';\nimport { extensionId } from "./Constants";\nimport FormService from "./FormService";\n\nexport default function ExtensionForm() {\n  const [prompt, setPrompt] = useState(\'\');\n  const [guestConnection, setGuestConnection] = useState();\n\n  const handleSubmit = async () => {\n    const instanceInfo = await guestConnection.host?.instance?.info();\n    const {programId, environmentId} = instanceInfo ?? {};\n    FormService.post(prompt, programId, environmentId);\n  }\n\n  useEffect(() => {\n    const init = async () => {\n      const connection = await attach({ id: extensionId });\n      setGuestConnection(connection);\n    }\n\n    init().catch(console.error);\n  }, [])\n\n  return (\n    <div className="extension-form">\n      <TextField\n        label="Prompt"\n        value={prompt}\n        onChange={setPrompt}\n      />\n      <Button onPress={handleSubmit}>\n        Submit\n      </Button>\n    </div>\n  );\n}\n')),(0,a.mdx)("h2",{id:"set-up-communication-with-experience-hub"},"Set up communication with Experience Hub"),(0,a.mdx)("p",null,"Both ",(0,a.mdx)("inlineCode",{parentName:"p"},"register")," and ",(0,a.mdx)("inlineCode",{parentName:"p"},"attach")," function of ",(0,a.mdx)("inlineCode",{parentName:"p"},"@adobe/uix-guest")," returns same connection object that has ",(0,a.mdx)("inlineCode",{parentName:"p"},"host")," property and\nexpose API of Experience Hub exposed for UI Extensions. Through this API you can access data from the Experience Hub as well as send data to it."))}p.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-services-aem-experience-hub-api-commons-index-md-b4932147c23e7eb06369.js.map