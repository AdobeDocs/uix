"use strict";(self.webpackChunk_adobe_uix_docs=self.webpackChunk_adobe_uix_docs||[]).push([[7129],{88683:function(e,t,n){n.r(t),n.d(t,{_frontmatter:function(){return r},default:function(){return u}});var a=n(87462),i=n(45987),o=(n(15007),n(64983)),s=n(91515);const l=["components"],r={},p=(d="InlineAlert",function(e){return console.warn("Component "+d+" was not imported, exported, or provided by MDXProvider as global scope"),(0,o.mdx)("div",e)});var d;const m={_frontmatter:r},c=s.Z;function u(e){let{components:t}=e,n=(0,i.Z)(e,l);return(0,o.mdx)(c,(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,o.mdx)("h1",{id:"troubleshooting---aem-assets-view-extensibility"},"Troubleshooting - AEM Assets View Extensibility"),(0,o.mdx)("p",null,"The ability to get fast feedback and see if the code works as expected is crucial for rapid development. A developer\nmay connect locally running UI Extension to production AEM Assets View, link it to the correct AEM backend,\nand verify all changes before deployment and extension publication."),(0,o.mdx)(p,{variant:"info",slots:"text",mdxType:"InlineAlert"}),(0,o.mdx)("p",null,"UI Extensibility is supported in Assets Ultimate only."),(0,o.mdx)(p,{variant:"info",slots:"text",mdxType:"InlineAlert"}),(0,o.mdx)("p",null,"To get access to Assets View UI extensibility,\n",(0,o.mdx)("a",{parentName:"p",href:"https://helpx.adobe.com/enterprise/using/support-for-experience-cloud.html"},"create and submit an Adobe Customer Support case"),'.\nYou can provide documentation feedback by clicking "Log an issue".'),(0,o.mdx)("h2",{id:"running-in-local-environment"},"Running in local environment"),(0,o.mdx)("p",null,"There are two options to run an extension locally:"),(0,o.mdx)("ol",null,(0,o.mdx)("li",{parentName:"ol"},"Complete local environment isolation. In this case, both the front-end code of your extension and the serverless actions\nrun locally. This mode is enabled with the ",(0,o.mdx)("inlineCode",{parentName:"li"},"aio app dev")," command."),(0,o.mdx)("li",{parentName:"ol"},"Partial isolation using the ",(0,o.mdx)("inlineCode",{parentName:"li"},"aio app run")," command, where the extension still uses Adobe I/O Runtime and deploys server-side functions in Adobe cloud.")),(0,o.mdx)("p",null,"For both options, the local development server with file change monitoring will be started to serve as the UI Extension front-end part."),(0,o.mdx)("p",null,"Regardless of where the server-side handlers are running, in local containers or on I/O Runtime, the developer will be able to connect a debugger to trace script execution. "),(0,o.mdx)("h3",{id:"complete-local-environment-isolation"},"Complete local environment isolation"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-shell"},"➜  demo-extension-project % aio app dev\n")),(0,o.mdx)("p",null,"This will deploy the actions to a local ",(0,o.mdx)("a",{parentName:"p",href:"https://openwhisk.apache.org/"},"OpenWhisk")," instance, which the ",(0,o.mdx)("a",{parentName:"p",href:"https://github.com/adobe/aio-cli"},"CLI"),"\nwill automatically download and install. The extension SPA will be run on the local machine."),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-shell"},"➜  demo-extension-project % aio app dev\nTo view your local application:\n  -> https://localhost:9080\nTo view your deployed application in the Experience Cloud shell:\n  -> https://experience.adobe.com/?devMode=true#/custom-apps/?localDevUrl=https://localhost:9080\nYour actions:\nweb actions:\n  -> https://localhost:9080/api/v1/web/aem-assets-details-1/my-action\nnon-web actions:\npress CTRL+C to terminate the dev environment\n2024-10-16T13:53:10.658Z [serve] info: server running on port : 9080\n2024-10-16T13:53:11.983Z [serve] info: 513 static asset(s) changed\n2024-10-16T13:53:11.983Z [serve] info: ✨ Built 3 bundles in 1223ms!\n")),(0,o.mdx)("h3",{id:"use-adobe-io-runtime-to-deploy-server-side-handlers"},"Use Adobe I/O Runtime to deploy server-side handlers"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-shell"},"➜  demo-extension-project % aio app run\n")),(0,o.mdx)("p",null,"This will deploy the actions to ",(0,o.mdx)("a",{parentName:"p",href:"/uix/apis/experienceplatform/runtime"},"Adobe I/O Runtime")," while running the UI part on the local machine. "),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-shell"},"➜  demo-extension-project % aio app run\nFor a developer preview of your UI extension in the AEM environment, follow the URL:\n  -> https://experience.adobe.com/aem/extension-manager/preview/<preview hash>\n   create .vscode/launch.json\n\nNo change to package.json was detected. No package manager install will be executed.\n\nTo view your local application:\n  -> https://localhost:9080\nTo view your deployed application in the Experience Cloud shell:\n  -> https://experience.adobe.com/?devMode=true#/custom-apps/?localDevUrl=https://localhost:9080\npress CTRL+C to terminate dev environment\n")),(0,o.mdx)("p",null,"Now your UI extension is reachable via the URL shown in the Terminal. "),(0,o.mdx)("h3",{id:"ui-extension-endpoint"},"UI Extension endpoint"),(0,o.mdx)("p",null,"Once local runtime is started extension endpoint is returned as URL in ",(0,o.mdx)("inlineCode",{parentName:"p"},"To view your local application"),".\nYou will need this URL to embed the locally running extension into AEM Assets View."),(0,o.mdx)("h3",{id:"accept-the-certificate"},"Accept the Certificate"),(0,o.mdx)("p",null,"If you are using this application for the first time, you will see a message similar to"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-shell"},"success: generated certificate\nA self signed development certificate has been generated, you will need to accept it in your browser in order to use it.\nWaiting for the certificate to be accepted.... timed out\n")),(0,o.mdx)("p",null,"This message pops up because we use a development SSL certificate for secure communication. Learn more about the purpose of this certificate ",(0,o.mdx)("a",{parentName:"p",href:"https://letsencrypt.org/docs/certificates-for-localhost/"},"here"),"."),(0,o.mdx)("p",null,"If you see this message, please navigate to ",(0,o.mdx)("inlineCode",{parentName:"p"},"https://localhost:9080"),". In Google Chrome you should see a screen similar to this."),(0,o.mdx)("p",null,(0,o.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"613px"}},"\n      ",(0,o.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"64.99999999999999%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,o.mdx)("picture",{parentName:"span"},"\n          ",(0,o.mdx)("source",{parentName:"picture",srcSet:["/uix/static/2b378084b922b4706af7b7deb20345eb/5530d/cert-1.webp 320w","/uix/static/2b378084b922b4706af7b7deb20345eb/5c2f3/cert-1.webp 613w"],sizes:"(max-width: 613px) 100vw, 613px",type:"image/webp"}),"\n          ",(0,o.mdx)("source",{parentName:"picture",srcSet:["/uix/static/2b378084b922b4706af7b7deb20345eb/dd4a7/cert-1.png 320w","/uix/static/2b378084b922b4706af7b7deb20345eb/ac863/cert-1.png 613w"],sizes:"(max-width: 613px) 100vw, 613px",type:"image/png"}),"\n          ",(0,o.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/uix/static/2b378084b922b4706af7b7deb20345eb/ac863/cert-1.png",alt:"Certification",title:"Certification",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,o.mdx)("p",null,"Click on ",(0,o.mdx)("inlineCode",{parentName:"p"},"Advanced"),", the nex screen may vary from browser to browser, but you should see a screen like this, where you can click on ",(0,o.mdx)("inlineCode",{parentName:"p"},"Proceed to localhost (unsafe)")," to accept the certificate."),(0,o.mdx)("p",null,(0,o.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"608px"}},"\n      ",(0,o.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"90.3125%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,o.mdx)("picture",{parentName:"span"},"\n          ",(0,o.mdx)("source",{parentName:"picture",srcSet:["/uix/static/94a8822b887641fef60d5eb3eeaffb74/5530d/cert-2.webp 320w","/uix/static/94a8822b887641fef60d5eb3eeaffb74/dfa82/cert-2.webp 608w"],sizes:"(max-width: 608px) 100vw, 608px",type:"image/webp"}),"\n          ",(0,o.mdx)("source",{parentName:"picture",srcSet:["/uix/static/94a8822b887641fef60d5eb3eeaffb74/dd4a7/cert-2.png 320w","/uix/static/94a8822b887641fef60d5eb3eeaffb74/5db90/cert-2.png 608w"],sizes:"(max-width: 608px) 100vw, 608px",type:"image/png"}),"\n          ",(0,o.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/uix/static/94a8822b887641fef60d5eb3eeaffb74/5db90/cert-2.png",alt:"Certification",title:"Certification",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,o.mdx)("p",null,"As alternative in Google Chrome you may type ",(0,o.mdx)("inlineCode",{parentName:"p"},"thisisunsafe"),". Please reference to documentation of your browser how to accept self-signed certificate."),(0,o.mdx)("p",null,"You may need to exit the current process and run ",(0,o.mdx)("inlineCode",{parentName:"p"},"aio app run")," again."),(0,o.mdx)("h2",{id:"load-ui-extension"},"Load UI Extension"),(0,o.mdx)("p",null,"Using extension endpoint URL returned at the end of run command output you may embed it into production environment of AEM Assets View:"),(0,o.mdx)("ol",null,(0,o.mdx)("li",{parentName:"ol"},"Navigate to AEM Assets View"),(0,o.mdx)("li",{parentName:"ol"},"Add the following query parameters to the URL:",(0,o.mdx)("ol",{parentName:"li"},(0,o.mdx)("li",{parentName:"ol"},(0,o.mdx)("inlineCode",{parentName:"li"},"devMode=true")," - instructs Adobe Experience Shell to allow content from localhost"),(0,o.mdx)("li",{parentName:"ol"},(0,o.mdx)("inlineCode",{parentName:"li"},"ext=<extension_endpoint_url>")," - full extension endpoint URL. You may use multiple ",(0,o.mdx)("inlineCode",{parentName:"li"},"ext")," parameters to test several extensions at time."))),(0,o.mdx)("li",{parentName:"ol"},"Hit Enter to reload AEM Assets View with added extension")),(0,o.mdx)("p",null,"Overall AEM Assets View URL should look similar to ",(0,o.mdx)("inlineCode",{parentName:"p"},"https://experience.adobe.com/?devMode=true&ext=https://localhost:9080&repoId=author-p12345-e123456-cm.adobeaemcloud.com#/@org/assets/workspace/"),"."),(0,o.mdx)("h3",{id:"ext-query-parameter"},"ext= query parameter"),(0,o.mdx)("p",null,"The ",(0,o.mdx)("inlineCode",{parentName:"p"},"ext")," query parameter supports different syntax variations depending on number of extensions to be loaded and\ntheir extension points."),(0,o.mdx)("p",null,"The complete syntax of the ",(0,o.mdx)("inlineCode",{parentName:"p"},"ext=")," query parameter is:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre"},"ext.<ExtensionPointId>=<url>[,<url>]\n")),(0,o.mdx)("p",null,", where"),(0,o.mdx)("ul",null,(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("inlineCode",{parentName:"li"},"ExtensionPointId")," is the ID of the extension point in AEM Assets View"),(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("inlineCode",{parentName:"li"},"url")," is the URL of the extension to be loaded")),(0,o.mdx)("p",null,"You may specify multiple ",(0,o.mdx)("inlineCode",{parentName:"p"},"ext")," parameters with different ",(0,o.mdx)("inlineCode",{parentName:"p"},"ExtensionPointId"),"s to load several extensions\nfor different extension points at the same time. You may also specify multiple extension URLs\nfor the same extension point by separating them with a comma."),(0,o.mdx)("p",null,(0,o.mdx)("strong",{parentName:"p"},"Example:")),(0,o.mdx)("p",null,(0,o.mdx)("inlineCode",{parentName:"p"},"ext.aem%2fassets%2fdetails%2f1=https://localhost:9080")," loads locally running extension from ",(0,o.mdx)("inlineCode",{parentName:"p"},"https://localhost:9080"),"\nand applies it to the ",(0,o.mdx)("inlineCode",{parentName:"p"},"aem/assets/details/1")," extension point.  "),(0,o.mdx)("p",null,"The ",(0,o.mdx)("inlineCode",{parentName:"p"},"ext=")," parameter can also be used without specifying the extension point ID:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre"},"ext=<url>[,<url>]\n")),(0,o.mdx)("p",null,", where"),(0,o.mdx)("ul",null,(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("inlineCode",{parentName:"li"},"url")," is the URL of the extension to be loaded")),(0,o.mdx)("p",null,"In this case, AEM Assets View will apply the extension to all available extension points."))}u.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-services-aem-assets-view-debug-index-md-90ac5bd5da342c719e2d.js.map