"use strict";(self.webpackChunk_adobe_uix_docs=self.webpackChunk_adobe_uix_docs||[]).push([[4052],{97606:function(e,n,t){t.r(n),t.d(n,{_frontmatter:function(){return l},default:function(){return p}});var i=t(87462),a=t(45987),s=(t(15007),t(64983)),o=t(91515);const d=["components"],l={},m={_frontmatter:l},r=o.Z;function p(e){let{components:n}=e,t=(0,a.Z)(e,d);return(0,s.mdx)(r,(0,i.Z)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,s.mdx)("h1",{id:"common-concepts-in-creating-extensions"},"Common Concepts in Creating Extensions"),(0,s.mdx)("p",null,"Understand the fundamentals required to develop an extension for the AEM Assets View."),(0,s.mdx)("h2",{id:"extension-point"},"Extension Point"),(0,s.mdx)("p",null,"AEM Assets View has an ",(0,s.mdx)("inlineCode",{parentName:"p"},"aem/assets/details/1")," ",(0,s.mdx)("a",{parentName:"p",href:"https://developer.adobe.com/app-builder/docs/guides/extensions/"},"extension point"),"\nthat allows you to extend its functionality in the Details View.\nTo declare it to be used by your extension, you need to add the following configuration to your ",(0,s.mdx)("inlineCode",{parentName:"p"},"app.config.yaml")," at the\nroot of your extension:"),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-yaml"},"extensions:\n  aem/assets/details/1:\n    $include: src/aem-assets-details-1/ext.config.yaml\n")),(0,s.mdx)("p",null,"Here is an example of ",(0,s.mdx)("inlineCode",{parentName:"p"},"ext.config.yaml")," file:"),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-yaml"},"operations:\n  view:\n    - type: web\n      impl: index.html\nactions: actions\nweb: web-src\n")),(0,s.mdx)("p",null,"More ",(0,s.mdx)("strong",{parentName:"p"},"extension points")," may be added in future releases to add extensibility features to other parts of the AEM Assets View."),(0,s.mdx)("h2",{id:"extension-registration"},"Extension Registration"),(0,s.mdx)("p",null,"Interaction between UI Extension and AEM Assets View starts with the initialization process that includes extension's\ncapabilities registration so AEM Assets View knows when to invoke the extension and which APIs to expose. Registration is done by calling the ",(0,s.mdx)("inlineCode",{parentName:"p"},"register()"),"\nfunction provided by ",(0,s.mdx)("inlineCode",{parentName:"p"},"@adobe/uix-guest")," library. This asynchronous function takes single object that describes extension\nand returns an object representing connection to the AEM Assets View."),(0,s.mdx)("p",null,"The ",(0,s.mdx)("inlineCode",{parentName:"p"},"register()")," function should be invoked after extension initialization page is loaded."),(0,s.mdx)("p",null,"Extension registration data must include:"),(0,s.mdx)("ul",null,(0,s.mdx)("li",{parentName:"ul"},(0,s.mdx)("inlineCode",{parentName:"li"},"id")," - string with random extension identifier. This identifier is useful for debugging of interaction between AEM Assets\nView and extension and is needed if extension provides custom UI."),(0,s.mdx)("li",{parentName:"ul"},(0,s.mdx)("inlineCode",{parentName:"li"},"methods")," - objects with the extension APIs exposed to the AEM Assets View. All methods are grouped into\n",(0,s.mdx)("strong",{parentName:"li"},"namespaces")," that represent more granular areas of AEM Assets View functionality within the extension point.\nCurrently, only the following ",(0,s.mdx)("strong",{parentName:"li"},"namespace")," is available:",(0,s.mdx)("ul",{parentName:"li"},(0,s.mdx)("li",{parentName:"ul"},(0,s.mdx)("inlineCode",{parentName:"li"},"detailSidePanel"),", that allows to add custom side panels in the Details View")))),(0,s.mdx)("p",null,"More ",(0,s.mdx)("strong",{parentName:"p"},"namespaces")," may be added in future releases to add more extensibility features within the Details View."),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-js"},"import { register } from '@adobe/uix-guest';\n\n// ...\n\n      const guestConnection = await register({\n        id: 'extension-id',\n        methods: {\n          detailSidePanel: {\n            getPanels() {\n              // ..\n            }\n          },\n        }\n      });\n// ...\n")),(0,s.mdx)("h2",{id:"building-extension-ui"},"Building Extension UI"),(0,s.mdx)("p",null,"The ",(0,s.mdx)("inlineCode",{parentName:"p"},"aem/assets/details/1")," extension point and its ",(0,s.mdx)("inlineCode",{parentName:"p"},"detailSidePanel")," ",(0,s.mdx)("strong",{parentName:"p"},"namespace")," requires UI extension to provide\nits own interface for the custom side panel. This interface should be implemented as a separate entry point within the extension\nweb application."),(0,s.mdx)("p",null,"Normally this interface needs data from the AEM Assets View or needs to trigger certain action within the host application.\nTo support this the interface page should establish its own connection with AEM Assets View  using the ",(0,s.mdx)("inlineCode",{parentName:"p"},"attach()")," function\nprovided by ",(0,s.mdx)("inlineCode",{parentName:"p"},"@adobe/uix-guest")," library."),(0,s.mdx)("p",null,"In this example, the interface page establishes a connection with the AEM Assets View using extension ",(0,s.mdx)("inlineCode",{parentName:"p"},"id")," and obtains\nthe AEM host URL:"),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-js"},"import { attach } from '@adobe/uix-guest';\n\nconst guestConnection = await attach({ id: 'extension-id' });\nconst aemHost = await guestConnection.discovery.getAemHost();\n")),(0,s.mdx)("h2",{id:"set-up-communication-with-aem-assets-view"},"Set up communication with AEM Assets View"),(0,s.mdx)("p",null,"Both ",(0,s.mdx)("inlineCode",{parentName:"p"},"register()")," and ",(0,s.mdx)("inlineCode",{parentName:"p"},"attach()")," functions of ",(0,s.mdx)("inlineCode",{parentName:"p"},"@adobe/uix-guest")," library return the same connection object that has ",(0,s.mdx)("inlineCode",{parentName:"p"},"host")," property and\nexposes AEM Assets View API to UI Extensions. Through this API you can access data from the host application as well as\ninvoke certain actions within it."),(0,s.mdx)("h2",{id:"common-apis-exposed-by-aem-assets-view-to-all-ui-extensions"},"Common APIs exposed by AEM Assets View to all UI Extensions"),(0,s.mdx)("p",null,"The APIs documented below are available to all AEM Assets View UI Extensions, irrespective of the extension point they are using."),(0,s.mdx)("p",null,"Every API is defined under its own namespace, which in turn is contained within the ",(0,s.mdx)("inlineCode",{parentName:"p"},"host")," object of the connection instance."),(0,s.mdx)("p",null,"All API invocations are asynchronous and return a ",(0,s.mdx)("inlineCode",{parentName:"p"},"Promise"),"."),(0,s.mdx)("h3",{id:"authentication-api"},"Authentication API"),(0,s.mdx)("p",null,"This API provides information about the current Org, access token and API key in the AEM Assets View.\nThe API uses ",(0,s.mdx)("inlineCode",{parentName:"p"},"auth")," namespace."),(0,s.mdx)("p",null,(0,s.mdx)("inlineCode",{parentName:"p"},"auth.getIMSInfo()")),(0,s.mdx)("p",null,(0,s.mdx)("strong",{parentName:"p"},"Description:")," returns information about IMS Org name, Id and access token."),(0,s.mdx)("p",null,(0,s.mdx)("strong",{parentName:"p"},"Return Object Structure")),(0,s.mdx)("ul",null,(0,s.mdx)("li",{parentName:"ul"},(0,s.mdx)("inlineCode",{parentName:"li"},"imsOrg")," (",(0,s.mdx)("inlineCode",{parentName:"li"},"string"),"): The IMS organization identifier."),(0,s.mdx)("li",{parentName:"ul"},(0,s.mdx)("inlineCode",{parentName:"li"},"imsOrgName")," (",(0,s.mdx)("inlineCode",{parentName:"li"},"string"),"): The name of the IMS organization."),(0,s.mdx)("li",{parentName:"ul"},(0,s.mdx)("inlineCode",{parentName:"li"},"accessToken")," (",(0,s.mdx)("inlineCode",{parentName:"li"},"string"),"): The access token for the IMS.")),(0,s.mdx)("p",null,(0,s.mdx)("inlineCode",{parentName:"p"},"auth.getApiKey()")),(0,s.mdx)("p",null,(0,s.mdx)("strong",{parentName:"p"},"Description:")," returns API key used by the AEM Assets View."),(0,s.mdx)("p",null,(0,s.mdx)("strong",{parentName:"p"},"Returns")," (",(0,s.mdx)("inlineCode",{parentName:"p"},"string"),"): API key "),(0,s.mdx)("p",null,(0,s.mdx)("strong",{parentName:"p"},"Example:")),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-js"},"const { imsOrg, accessToken } = await guestConnection.host.auth.getIMSInfo();\n\nconst apiKey = await guestConnection.host.auth.getAPIKey();\n")),(0,s.mdx)("h3",{id:"discovery-api"},"Discovery API"),(0,s.mdx)("p",null,"This API provides information AEM author instance location."),(0,s.mdx)("p",null,(0,s.mdx)("inlineCode",{parentName:"p"},"discovery.getAemHost()")),(0,s.mdx)("p",null,(0,s.mdx)("strong",{parentName:"p"},"Description:")," returns the URL of the AEM author instance."),(0,s.mdx)("p",null,(0,s.mdx)("strong",{parentName:"p"},"Returns")," (",(0,s.mdx)("inlineCode",{parentName:"p"},"string"),"): AEM author instance URL"),(0,s.mdx)("p",null,(0,s.mdx)("strong",{parentName:"p"},"Example:")),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-js"},"const aemHost = await guestConnection.host.discovery.getAemHost();\n")),(0,s.mdx)("h3",{id:"toast-api"},"Toast API"),(0,s.mdx)("p",null,"This API provides methods to show toast messages in the AEM Assets View."),(0,s.mdx)("p",null,(0,s.mdx)("inlineCode",{parentName:"p"},"toast.display({ variant, message })")),(0,s.mdx)("p",null,(0,s.mdx)("strong",{parentName:"p"},"Description:")," shows a toast message in the AEM Assets View."),(0,s.mdx)("p",null,(0,s.mdx)("strong",{parentName:"p"},"Parameters:")),(0,s.mdx)("ul",null,(0,s.mdx)("li",{parentName:"ul"},(0,s.mdx)("strong",{parentName:"li"},"options")," (",(0,s.mdx)("inlineCode",{parentName:"li"},"object"),"): Object with the following properties:",(0,s.mdx)("ul",{parentName:"li"},(0,s.mdx)("li",{parentName:"ul"},"variant (",(0,s.mdx)("inlineCode",{parentName:"li"},"string"),", optional): The type of toast message. Possible values are ",(0,s.mdx)("inlineCode",{parentName:"li"},"neutral"),", ",(0,s.mdx)("inlineCode",{parentName:"li"},"positive"),", ",(0,s.mdx)("inlineCode",{parentName:"li"},"info"),", ",(0,s.mdx)("inlineCode",{parentName:"li"},"negative"),". Default value is ",(0,s.mdx)("inlineCode",{parentName:"li"},"info"),"."),(0,s.mdx)("li",{parentName:"ul"},"message (",(0,s.mdx)("inlineCode",{parentName:"li"},"string"),", required): The message to display in the toast.")))),(0,s.mdx)("p",null,(0,s.mdx)("strong",{parentName:"p"},"Example:")),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-js"},"guestConnection.host.toast.display({ variant: 'positive', message: 'Asset saved successfully' });\n")),(0,s.mdx)("h3",{id:"router-api"},"Router API"),(0,s.mdx)("p",null,"This API provides methods to navigate to different parts of the AEM Assets View."),(0,s.mdx)("p",null,(0,s.mdx)("inlineCode",{parentName:"p"},"router.navigateToAssetDetails({ assetPath })")),(0,s.mdx)("p",null,(0,s.mdx)("strong",{parentName:"p"},"Description:")," navigates to a Details View of the specific asset."),(0,s.mdx)("p",null,(0,s.mdx)("strong",{parentName:"p"},"Parameters:")),(0,s.mdx)("ul",null,(0,s.mdx)("li",{parentName:"ul"},(0,s.mdx)("strong",{parentName:"li"},"options")," (",(0,s.mdx)("inlineCode",{parentName:"li"},"object"),"): Object with the following properties:",(0,s.mdx)("ul",{parentName:"li"},(0,s.mdx)("li",{parentName:"ul"},"assetPath (",(0,s.mdx)("inlineCode",{parentName:"li"},"string"),", required): The path to the asset in the AEM Assets View.")))),(0,s.mdx)("p",null,(0,s.mdx)("strong",{parentName:"p"},"Example:")),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-js"},"guestConnection.host.router.navigateToAssetDetails({ assetPath: '/content/dam/my-assets/image.jpg' });\n")),(0,s.mdx)("h3",{id:"i18n-api"},"i18n API"),(0,s.mdx)("p",null,"This API provides methods to support localization of the UI Extension."),(0,s.mdx)("p",null,(0,s.mdx)("inlineCode",{parentName:"p"},"i18n.getLocalizationInfo()")),(0,s.mdx)("p",null,(0,s.mdx)("strong",{parentName:"p"},"Description:")," returns information about the current locale used in the AEM Assets View."),(0,s.mdx)("p",null,(0,s.mdx)("strong",{parentName:"p"},"Return Object Structure")),(0,s.mdx)("ul",null,(0,s.mdx)("li",{parentName:"ul"},(0,s.mdx)("inlineCode",{parentName:"li"},"locale")," (",(0,s.mdx)("inlineCode",{parentName:"li"},"string"),"): The current locale used in the AEM Assets View.")),(0,s.mdx)("p",null,(0,s.mdx)("strong",{parentName:"p"},"Example:")),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-js"},"const { locale } = await guestConnection.host.i18n.getLocalizationInfo();\n")))}p.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-services-aem-assets-view-api-commons-index-md-a635ffbdf6460591c6df.js.map