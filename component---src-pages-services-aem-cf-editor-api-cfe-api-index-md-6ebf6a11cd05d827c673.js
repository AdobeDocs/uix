"use strict";(self.webpackChunk_adobe_uix_docs=self.webpackChunk_adobe_uix_docs||[]).push([[4976],{65880:function(e,n,t){t.r(n),t.d(n,{_frontmatter:function(){return c},default:function(){return g}});var o=t(87462),a=t(45987),r=(t(15007),t(64983)),s=t(91515);const i=["components"],c={},d=(m="InlineAlert",function(e){return console.warn("Component "+m+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.mdx)("div",e)});var m;const u={_frontmatter:c},l=s.Z;function g(e){let{components:n}=e,t=(0,a.Z)(e,i);return(0,r.mdx)(l,(0,o.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,r.mdx)("h1",{id:"aem-content-fragments-editor-extension-points"},"AEM Content Fragments Editor Extension Points"),(0,r.mdx)("p",null,"Content Fragment Editor extensibility API allows extension access and update information about active application context."),(0,r.mdx)("h3",{id:"shared-context"},"Shared Context"),(0,r.mdx)("p",null,"In order to empower UI Extensions perform useful actions Content Fragments Editor provides access to data that simplifies user authentication and usage of AEM API. Such data may be accessed through ",(0,r.mdx)("inlineCode",{parentName:"p"},"sharedContext")," property of ",(0,r.mdx)("inlineCode",{parentName:"p"},"host"),"."),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-js"},'import { attach } from "@adobe/uix-guest";\n\nconst guestConnection = await attach({\n    id: "my-id"\n}\nconst context = guestConnection.sharedContext;\nconst aemHost = context.get("aemHost");\n')),(0,r.mdx)("p",null,"Available shared context data:"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-js"},'{\n    aemHost: string, // hostname of connected AEM environment\n    locale: string, // locale of current user\n    theme: "light" | "dark", // color schema selected by current user\n    auth: {\n        imsOrg: string, // current IMS organization\n        imsToken: string, // user token\n        apiKey: string, // API key to use for requests to Adobe services\n        imsOrgName: string, // Human readable organization name\n        authScheme: "Bearer" // Auth schema that should be used during communication with Adobe services\n    }\n}\n')),(0,r.mdx)("h3",{id:"get-content-fragment"},"Get Content Fragment"),(0,r.mdx)("p",null,"You can access data about the Content Fragment that is currently being edited by using the ",(0,r.mdx)("inlineCode",{parentName:"p"},"host.contentFragment.getContentFragment()")," method in an extension:"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-js"},'import { register } from "@adobe/uix-guest";\n// ...\nconst init = async () => {\n    const registrationConfig = {\n        id: extensionId,\n        methods: {\n            headerMenu: {\n                async getButtons() {\n                    return [\n                        {\n                            id: "get-active-cf",\n                            label: "Get Active CF / Canvas",\n                            onClick: async () => {\n                                // Get Content Fragment\n                                const contentFragment = await guestConnection.host.contentFragment.getContentFragment();\n                            },\n                        },\n                    ];\n                },\n            },\n        },\n    };\n    const guestConnection = await register(registrationConfig);\n}\ninit().catch(console.error)\n')),(0,r.mdx)("h4",{id:"result-object"},"Result object"),(0,r.mdx)("p",null,"This ",(0,r.mdx)("inlineCode",{parentName:"p"},"contentFragment")," object holds the last received state from AEM instance. It does not contain recent changes from the Editor (no edits from the canvas, sidebar or changes to variations) ",(0,r.mdx)("strong",{parentName:"p"},"until they are successfully saved")," in AEM."),(0,r.mdx)(d,{variant:"warning",slots:"text",mdxType:"InlineAlert"}),(0,r.mdx)("p",null,"The API is experimental and might change or disappear at any time. The result object structure is part of a low level API that could be changed in the future."))}g.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-services-aem-cf-editor-api-cfe-api-index-md-6ebf6a11cd05d827c673.js.map