"use strict";(self.webpackChunk_adobe_uix_docs=self.webpackChunk_adobe_uix_docs||[]).push([[905],{22611:function(e,n,t){t.r(n),t.d(n,{_frontmatter:function(){return s},default:function(){return d}});var a=t(87462),i=t(63366),o=(t(15007),t(64983)),l=t(91515),c=["components"],s={},r={_frontmatter:s},p=l.Z;function d(e){var n=e.components,t=(0,i.Z)(e,c);return(0,o.mdx)(p,(0,a.Z)({},r,t,{components:n,mdxType:"MDXLayout"}),(0,o.mdx)("h1",{id:"debug-contents-fragment-console-extension"},"Debug Contents Fragment Console Extension"),(0,o.mdx)("p",null,"The ability to get fast feedback and see if the code works as expected or not is crucial for rapid development. A developer may connect locally running UI Extension to production AEM Content Fragments Console, link it to the correct AEM backend, and verify all changes before deployment and extension publication."),(0,o.mdx)("h2",{id:"run-local-environment"},"Run local environment"),(0,o.mdx)("p",null,"When the developer runs UI Extension locally and if it has server-side handlers 2 options available:"),(0,o.mdx)("ol",null,(0,o.mdx)("li",{parentName:"ol"},"Complete local environment isolation. In this case, the local environment requires JVM and Docker installed and will run server-side handlers locally inside Docker containers. This mode is enabled by adding ",(0,o.mdx)("inlineCode",{parentName:"li"},"--local")," option to ",(0,o.mdx)("inlineCode",{parentName:"li"},"run")," command."),(0,o.mdx)("li",{parentName:"ol"},"By default ",(0,o.mdx)("inlineCode",{parentName:"li"},"run")," command will use Adobe I/O Runtime and deploy server-side functions in Adobe cloud.")),(0,o.mdx)("p",null,"For both options, the local development server with file change monitoring will be started to server UI Extension front-end part."),(0,o.mdx)("p",null,"Regardless of where server-side handlers are running, in local containers or on I/O Runtime developer will be able to connect a debugger to trace script execution. "),(0,o.mdx)("h3",{id:"complete-local-environment-isolation"},"Complete local environment isolation"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-shell"},"➜  demo-extension-project % aio app run --local\n")),(0,o.mdx)("p",null,"This will deploy the actions to a local ",(0,o.mdx)("a",{parentName:"p",href:"https://openwhisk.apache.org/"},"OpenWhisk")," instance, which the ",(0,o.mdx)("a",{parentName:"p",href:"https://github.com/adobe/aio-cli"},"CLI")," will automatically download and install. The SPA will be run on the local machine."),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-shell"},"➜  demo-extension-project % aio app run --local\n  ℹ checking if java is installed...\n  ℹ checking if docker is installed...\n  ℹ checking if docker is running...\n  ℹ starting local OpenWhisk stack...\n  ℹ writing credentials to tmp wskdebug config 'project/dist/aem-cf-console-admin-1/.env.local'\n  ℹ building actions..\n  ℹ watching action files at project/src/aem-cf-console-admin-1/actions...\n  ℹ injecting backend urls into frontend config\n  ℹ bundling project/src/aem-cf-console-admin-1/web-src/**/*.html\n  ℹ redeploying actions..\n  ℹ Info: Deploying package [aem-cf-console-admin-1]...\n  ℹ Info: package [aem-cf-console-admin-1] has been successfully deployed.\n\n  ℹ Info: Deploying action [aem-cf-console-admin-1/import]...\n  ℹ Info: action [aem-cf-console-admin-1/import] has been successfully deployed.\n\n  ℹ Info: Deploying action [aem-cf-console-admin-1/export]...\n  ℹ Info: action [aem-cf-console-admin-1/export] has been successfully deployed.\n\n  ℹ Success: Deployment completed successfully.\n  ℹ web actions:\n  ℹ   -> http://localhost:3233/api/v1/web/guest/aem-cf-console-admin-1/import\n  ℹ   -> http://localhost:3233/api/v1/web/guest/aem-cf-console-admin-1/export\n  ℹ serving front-end using bundler serve...\n  ℹ local frontend server running at https://localhost:9080\n  ℹ setting up vscode debug configuration files...\n  ⠋    create .vscode/launch.json\n\n  No change to package.json was detected. No package manager install will be executed.\n  ℹ press CTRL+C to terminate dev environment\n  \n  To view your local application:\n    -> https://localhost:9080\n  To view your deployed application in the Experience Cloud shell:\n    -> https://experience.adobe.com/?devMode=true#/custom-apps/?localDevUrl=https://localhost:9080\n  press CTRL+C to terminate dev environment\n")),(0,o.mdx)("h3",{id:"use-adobe-io-runtime-to-deploy-server-side-handlers"},"Use Adobe I/O Runtime to deploy server-side handlers"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-shell"},"➜  demo-extension-project % aio app run\n")),(0,o.mdx)("p",null,"This will deploy the actions to ",(0,o.mdx)("a",{parentName:"p",href:"/uix/apis/experienceplatform/runtime"},"Adobe I/O Runtime"),", while running the UI part on the local machine. "),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-shell"},"➜  demo-extension-project % aio app run\n  create .vscode/launch.json\n\nNo change to package.json was detected. No package manager install will be executed.\n\nTo view your local application:\n  -> https://localhost:9080\nTo view your deployed application in the Experience Cloud shell:\n  -> https://experience.adobe.com/?devMode=true#/custom-apps/?localDevUrl=https://localhost:9080\npress CTRL+C to terminate dev environment\n")),(0,o.mdx)("p",null,"Now your UI extension is reachable by the displayed URL on the Terminal. "),(0,o.mdx)("h3",{id:"ui-extension-endpoint"},"UI Extension endpoint"),(0,o.mdx)("p",null,"Once local runtime is started extension endpoint is returned as URL in ",(0,o.mdx)("inlineCode",{parentName:"p"},"To view your local application"),". You will need this URL to embed locally running extension into AEM Content Fragments Console."),(0,o.mdx)("h3",{id:"accept-the-certificate"},"Accept the Certificate"),(0,o.mdx)("p",null,"If you are using this application for the first time, you will see a message similar to"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-shell"},"success: generated certificate\nA self signed development certificate has been generated, you will need to accept it in your browser in order to use it.\nWaiting for the certificate to be accepted.... timed out\n")),(0,o.mdx)("p",null,"This message pops up because we use a development SSL certificate for secure communication. Understand more about the purpose of this certificate ",(0,o.mdx)("a",{parentName:"p",href:"https://letsencrypt.org/docs/certificates-for-localhost/"},"here"),"."),(0,o.mdx)("p",null,"If you see this message, please navigate to ",(0,o.mdx)("inlineCode",{parentName:"p"},"https://localhost:9080"),". In Google Chrome you should see a screen similar to this."),(0,o.mdx)("p",null,(0,o.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"613px"}},"\n      ",(0,o.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"64.90566037735849%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,o.mdx)("picture",{parentName:"span"},"\n          ",(0,o.mdx)("source",{parentName:"picture",srcSet:["/uix/static/2b378084b922b4706af7b7deb20345eb/dda86/cert-1.webp 265w","/uix/static/2b378084b922b4706af7b7deb20345eb/010e6/cert-1.webp 530w","/uix/static/2b378084b922b4706af7b7deb20345eb/5c2f3/cert-1.webp 613w"],sizes:"(max-width: 613px) 100vw, 613px",type:"image/webp"}),"\n          ",(0,o.mdx)("source",{parentName:"picture",srcSet:["/uix/static/2b378084b922b4706af7b7deb20345eb/28773/cert-1.png 265w","/uix/static/2b378084b922b4706af7b7deb20345eb/a0177/cert-1.png 530w","/uix/static/2b378084b922b4706af7b7deb20345eb/ac863/cert-1.png 613w"],sizes:"(max-width: 613px) 100vw, 613px",type:"image/png"}),"\n          ",(0,o.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/uix/static/2b378084b922b4706af7b7deb20345eb/ac863/cert-1.png",alt:"Certification",title:"Certification",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,o.mdx)("p",null,"Click on ",(0,o.mdx)("inlineCode",{parentName:"p"},"Advanced"),", the nex screen may vary from browser to browser, but you should see a screen like this, where you can click on ",(0,o.mdx)("inlineCode",{parentName:"p"},"Proceed to localhost (unsafe)")," to accept the certificate."),(0,o.mdx)("p",null,(0,o.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"608px"}},"\n      ",(0,o.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"90.18867924528303%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,o.mdx)("picture",{parentName:"span"},"\n          ",(0,o.mdx)("source",{parentName:"picture",srcSet:["/uix/static/94a8822b887641fef60d5eb3eeaffb74/dda86/cert-2.webp 265w","/uix/static/94a8822b887641fef60d5eb3eeaffb74/010e6/cert-2.webp 530w","/uix/static/94a8822b887641fef60d5eb3eeaffb74/dfa82/cert-2.webp 608w"],sizes:"(max-width: 608px) 100vw, 608px",type:"image/webp"}),"\n          ",(0,o.mdx)("source",{parentName:"picture",srcSet:["/uix/static/94a8822b887641fef60d5eb3eeaffb74/28773/cert-2.png 265w","/uix/static/94a8822b887641fef60d5eb3eeaffb74/a0177/cert-2.png 530w","/uix/static/94a8822b887641fef60d5eb3eeaffb74/5db90/cert-2.png 608w"],sizes:"(max-width: 608px) 100vw, 608px",type:"image/png"}),"\n          ",(0,o.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/uix/static/94a8822b887641fef60d5eb3eeaffb74/5db90/cert-2.png",alt:"Certification",title:"Certification",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,o.mdx)("p",null,"As alternative in Google Chrome you may type ",(0,o.mdx)("inlineCode",{parentName:"p"},"thisisunsafe"),". Please reference to documentation of your browser how to accept self-signed certificate."),(0,o.mdx)("p",null,"You may need to exit the current process and run ",(0,o.mdx)("inlineCode",{parentName:"p"},"aio app run")," again."),(0,o.mdx)("h2",{id:"load-ui-extension"},"Load UI Extension"),(0,o.mdx)("p",null,"Using extension endpoint URL returned at the end of run command output you may embed it into production environment of AEM Contents Fragment Service:"),(0,o.mdx)("ol",null,(0,o.mdx)("li",{parentName:"ol"},"Navigate to Global Navigation panel of AEM environment which data you plan to use for extension verification.\n",(0,o.mdx)("span",{parentName:"li",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1060px"}},"\n      ",(0,o.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"39.24528301886793%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,o.mdx)("picture",{parentName:"span"},"\n          ",(0,o.mdx)("source",{parentName:"picture",srcSet:["/uix/static/1bfed8b78c7ef272f4bc5c056e13c3a0/dda86/cfc-global-navigation.webp 265w","/uix/static/1bfed8b78c7ef272f4bc5c056e13c3a0/010e6/cfc-global-navigation.webp 530w","/uix/static/1bfed8b78c7ef272f4bc5c056e13c3a0/668f0/cfc-global-navigation.webp 1060w","/uix/static/1bfed8b78c7ef272f4bc5c056e13c3a0/89d57/cfc-global-navigation.webp 1590w","/uix/static/1bfed8b78c7ef272f4bc5c056e13c3a0/094b8/cfc-global-navigation.webp 2120w","/uix/static/1bfed8b78c7ef272f4bc5c056e13c3a0/ba45c/cfc-global-navigation.webp 2836w"],sizes:"(max-width: 1060px) 100vw, 1060px",type:"image/webp"}),"\n          ",(0,o.mdx)("source",{parentName:"picture",srcSet:["/uix/static/1bfed8b78c7ef272f4bc5c056e13c3a0/28773/cfc-global-navigation.png 265w","/uix/static/1bfed8b78c7ef272f4bc5c056e13c3a0/a0177/cfc-global-navigation.png 530w","/uix/static/1bfed8b78c7ef272f4bc5c056e13c3a0/ea60f/cfc-global-navigation.png 1060w","/uix/static/1bfed8b78c7ef272f4bc5c056e13c3a0/684d5/cfc-global-navigation.png 1590w","/uix/static/1bfed8b78c7ef272f4bc5c056e13c3a0/5e85f/cfc-global-navigation.png 2120w","/uix/static/1bfed8b78c7ef272f4bc5c056e13c3a0/100fa/cfc-global-navigation.png 2836w"],sizes:"(max-width: 1060px) 100vw, 1060px",type:"image/png"}),"\n          ",(0,o.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/uix/static/1bfed8b78c7ef272f4bc5c056e13c3a0/ea60f/cfc-global-navigation.png",alt:"AEM Global Navigation",title:"AEM Global Navigation",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,o.mdx)("li",{parentName:"ol"},"Click on ",(0,o.mdx)("inlineCode",{parentName:"li"},"Content Fragments")),(0,o.mdx)("li",{parentName:"ol"},"You will be redirected to AEM Contents Fragment Console running in ADobe Experience Shell."),(0,o.mdx)("li",{parentName:"ol"},"To the URL where you was redirected add following query parameters:",(0,o.mdx)("ol",{parentName:"li"},(0,o.mdx)("li",{parentName:"ol"},(0,o.mdx)("inlineCode",{parentName:"li"},"devMode=true")," - instructs Adobe Experience Shell to allow content from localhost"),(0,o.mdx)("li",{parentName:"ol"},(0,o.mdx)("inlineCode",{parentName:"li"},"ext=<extension_endpoint_url>")," - full extension endpoint URL. You may use multiple ",(0,o.mdx)("inlineCode",{parentName:"li"},"ext")," parameters to test several extensions at time."))),(0,o.mdx)("li",{parentName:"ol"},"Hit Enter to reload Content Fragments Console with added extension")),(0,o.mdx)("p",null,"Overall Content Fragments Console URL schema should looks like ",(0,o.mdx)("inlineCode",{parentName:"p"},"https://experience.adobe.com/?devMode=true&ext=https://localhost:9080&repo=author-p1234-e12345.adobeaemcloud.com#/@sitesinternal/aem/cf/admin/"),"."))}d.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-services-aem-cf-console-admin-debug-index-md-550b2b941877e8a1f74c.js.map